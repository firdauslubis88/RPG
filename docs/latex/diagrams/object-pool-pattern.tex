\documentclass[tikz,border=10pt]{standalone}
\usepackage{tikz}
\usetikzlibrary{shapes,arrows,positioning,fit,backgrounds,decorations.pathmorphing}

\begin{document}

\tikzstyle{class} = [rectangle, draw, fill=blue!20, text width=8em, text centered, minimum height=3em]
\tikzstyle{pool} = [rectangle, draw, fill=green!20, text width=10em, text centered, minimum height=4em, rounded corners]
\tikzstyle{object} = [circle, draw, fill=yellow!30, minimum size=1.5em]
\tikzstyle{arrow} = [thick,->,>=stealth]

\begin{tikzpicture}[node distance=2.5cm, auto]

% Title
\node [above] at (0,7) {\Large\textbf{Object Pool Pattern}};
\node [above] at (0,6.5) {\textit{Week 10 - Branch 10-04}};

% ObstaclePool class
\node [pool] (pool) at (0,4.5) {
    \textbf{ObstaclePool}\\
    \rule{6em}{0.4pt}\\
    \texttt{-availableObstacles}\\
    \texttt{-allObstacles}\\
    \rule{6em}{0.4pt}\\
    \texttt{+acquire(x, y)}\\
    \texttt{+release(obstacle)}
};

% Available pool (left side)
\node [draw, fill=green!10, minimum width=6em, minimum height=8em, above left=of pool, xshift=-2cm, yshift=0.5cm] (available) {};
\node [above] at (available.north) {\textbf{Available}};
\node [object] (av1) at (available.center) {};
\node [object, above=0.3cm of av1] (av2) {};
\node [object, above=0.3cm of av2] (av3) {};
\node [object, below=0.3cm of av1] (av4) {};
\node [object, below=0.3cm of av4] (av5) {};

% In-use area (right side)
\node [draw, fill=red!10, minimum width=6em, minimum height=8em, above right=of pool, xshift=2cm, yshift=0.5cm] (inuse) {};
\node [above] at (inuse.north) {\textbf{In Use}};
\node [object] (iu1) at (inuse.center) {};
\node [object, above=0.3cm of iu1] (iu2) {};
\node [object, below=0.3cm of iu1] (iu3) {};

% Client
\node [class, above=of pool, yshift=2cm] (client) {
    \textbf{WorldController}\\
    \rule{6em}{0.4pt}\\
    \texttt{-pools: List}\\
    \texttt{-activeObstacles}
};

% Lifecycle arrows
\draw [arrow, green, very thick] (available.south) -- (pool.north west) node[midway, left, text width=3em] {\textcolor{green}{\texttt{acquire()}}};
\draw [arrow, red, very thick] (pool.north east) -- (inuse.south) node[midway, right, text width=3em] {\textcolor{red}{\texttt{use}}};
\draw [arrow, blue, very thick, bend right=40] (inuse.west) to node[midway, above, text width=3em] {\textcolor{blue}{\texttt{release()}}} (available.east);

% Client interactions
\draw [arrow] (client) -- (pool) node[midway, left] {\texttt{calls}};

% Lifecycle diagram
\node [draw, fill=yellow!10, rounded corners, text width=12em, below=of pool, yshift=-1cm] (lifecycle) {
    \textbf{Object Lifecycle:}\\
    1. \textcolor{green}{Startup:} Pre-allocate\\
    2. \textcolor{red}{Acquire:} Remove from available\\
    3. \textcolor{red}{Reset:} Clean state\\
    4. \textcolor{red}{Use:} Game logic\\
    5. \textcolor{blue}{Release:} Return to available\\
    6. \textcolor{green}{Reuse:} Goto step 2
};

% Performance comparison
\node [draw, fill=orange!10, text width=14em, below=of lifecycle, yshift=-0.5cm] (perf) {
    \textbf{Performance Comparison (50s):}\\
    \textcolor{red}{Without Pool:} 1000+ creates\\
    \textcolor{green}{With Pool:} 150 creates, 860+ reuses\\
    \\
    \textcolor{red}{GC Time:} 9ms\\
    \textcolor{green}{GC Time:} 8ms (97\% reduction in allocation!)
};

% Annotations
\node [draw=none, fill=none, text width=6em, left=of available, xshift=-1cm] (note1) {
    Ready to\\
    borrow\\
    \\
    (idle)
};

\node [draw=none, fill=none, text width=6em, right=of inuse, xshift=1cm] (note2) {
    Currently\\
    active in\\
    game\\
    (busy)
};

\end{tikzpicture}

\end{document}
